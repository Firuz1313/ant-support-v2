<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Тест Three.js</title>
<style>
  body {
    margin: 0;
    padding: 0;
    background: #e8f0f8;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  }
  #container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    flex-direction: column;
  }
  canvas {
    border: 2px solid #333;
    border-radius: 8px;
  }
  #status {
    margin-top: 20px;
    padding: 10px;
    background: #fff;
    border-radius: 5px;
    font-size: 16px;
  }
</style>
</head>
<body>
  <div id="container">
    <canvas id="canvas3d" width="800" height="600"></canvas>
    <div id="status">Загрузка...</div>
  </div>

  <!-- Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.153.0/examples/js/controls/OrbitControls.min.js"></script>
  
  <script>
    const status = document.getElementById('status');
    
    try {
      status.textContent = "Инициализация Three.js...";
      
      const canvas = document.getElementById('canvas3d');
      const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
      renderer.setClearColor(0x87CEEB);
      renderer.setSize(800, 600);

      const scene = new THREE.Scene();

      const camera = new THREE.PerspectiveCamera(75, 800 / 600, 0.1, 1000);
      camera.position.z = 5;

      const controls = new THREE.OrbitControls(camera, canvas);
      controls.enableDamping = true;

      // Создаем простой куб
      const geometry = new THREE.BoxGeometry();
      const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
      const cube = new THREE.Mesh(geometry, material);
      scene.add(cube);

      status.textContent = "Three.js работает! Нажмите ПРОБЕЛ для анимации";

      let animationId;
      
      function animate() {
        animationId = requestAnimationFrame(animate);
        cube.rotation.x += 0.01;
        cube.rotation.y += 0.01;
        controls.update();
        renderer.render(scene, camera);
      }

      // Запуск анимации по пробелу
      window.addEventListener('keydown', (e) => {
        if (e.code === 'Space') {
          if (!animationId) {
            animate();
            status.textContent = "Анимация запущена!";
          } else {
            cancelAnimationFrame(animationId);
            animationId = null;
            status.textContent = "Анимация остановлена. Нажмите ПРОБЕЛ снова.";
          }
        }
      });

      // Показываем сцену без анимации
      renderer.render(scene, camera);
      
    } catch (error) {
      status.textContent = "Ошибка: " + error.message;
      console.error("Ошибка Three.js:", error);
    }
  </script>
</body>
</html> 